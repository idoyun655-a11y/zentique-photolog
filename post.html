<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="color-scheme" content="dark" />
<link rel="stylesheet" href="/assets/styles.css" />
<title>zentique</title>

</head>
<body>
  <div class="container">
    <div class="topbar">
  <div class="brand">zentique</div>
  <div class="nav">
    <a class="pill" href="/">타임라인</a>
    <a class="pill" href="/photos.html">사진</a>
    <a class="pill" href="/admin/">관리자</a>
  </div>
</div>
<div class="sub">공개 사진 포토로그입니다. 관리자는 보호됩니다. 스크린샷 방지? 불가능. 워터마크 방지? 어느 정도 가능.</div>

    <a id="backBtn" class="btn" href="/">← 뒤로</a>
    <div id="post"></div>
    <div id="comments"></div>
    <div class="footer">게시물 상세</div>
  </div>
  <script>
(function () {
  const back = document.getElementById("backBtn");
  if (!back) return;

  back.addEventListener("click", (e) => {
    const ref = document.referrer;

    try {
      if (ref) {
        const u = new URL(ref);
        const sameOrigin = (u.origin === location.origin);
        if (sameOrigin) {
          e.preventDefault();

          // 1) 뒤로가기 시도
          if (history.length > 1) {
            const here = location.href;
            history.back();

            // iOS Safari에서 back이 씹히면 referrer로 강제 이동
            setTimeout(() => {
              if (location.href === here) location.href = ref;
            }, 250);
          } else {
            location.href = ref;
          }
          return;
        }
      }
    } catch (_) {}

    // same-origin referrer가 아니면 기본 href="/" 동작
  });
})();
</script>
  <script type="module" src="/assets/app.js"></script>
</body>
</html>
